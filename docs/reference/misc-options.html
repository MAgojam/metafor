<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Miscellaneous Options and Features — misc-options • metafor</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Miscellaneous Options and Features — misc-options"><meta property="og:description" content="This page documents some miscellaneous options and features that do not fit very well elsewhere. "><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wviechtb"><meta name="twitter:site" content="@wviechtb"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="../darkswitch.js"></script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.7-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/article/view/v036i03" class="external-link">JSS Article</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        <li>
  <a href="https://scholar.social/@wviechtb" class="external-link">Mastodon</a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor" class="external-link">GitHub</a>
</li>
        
        


      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Miscellaneous Options and Features</h1>
    
    <div class="hidden name"><code>misc-options.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This page documents some miscellaneous options and features that do not fit very well elsewhere. <script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script></p>
    </div>


    <div id="details">
    <h2>Details</h2>
    

<p></p><div class="section">
<h3 id="specifying-the-confidence-level">Specifying the Confidence Level<a class="anchor" aria-label="anchor" href="#specifying-the-confidence-level"></a></h3>


<p>Several functions in the <span class="pkg">metafor</span> package have a <code>level</code> argument for specifying the confidence level when calculating confidence (and prediction) intervals. The default is to use a 95% level throughout the package by convention. Note that values <em></em>\(&gt;=1\) are treated as coverage percentages, values between 0.5 and 1 as coverage proportions, and values below 0.5 as (two-sided) alpha values, so <code>level=95</code> is the same as <code>level=.95</code> and <code>level=.05</code> (but <code>level=0</code> is always treated as a 0% confidence level).</p>
<p></p>
</div>

<p></p><div class="section">
<h3 id="controlling-the-number-of-digits-in-the-output">Controlling the Number of Digits in the Output<a class="anchor" aria-label="anchor" href="#controlling-the-number-of-digits-in-the-output"></a></h3>


<p>Many functions in the <span class="pkg">metafor</span> package have a <code>digits</code> argument, which can be used to control the number of digits that are displayed in the output when printing numeric values. For more control over the displayed output, one can set this argument to a named vector of the form:</p>
<p></p><div class="sourceCode"><pre><code><span><span class="va">digits</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>est<span class="op">=</span><span class="fl">2</span>, se<span class="op">=</span><span class="fl">3</span>, test<span class="op">=</span><span class="fl">2</span>, pval<span class="op">=</span><span class="fl">3</span>, ci<span class="op">=</span><span class="fl">2</span>, var<span class="op">=</span><span class="fl">3</span>, sevar<span class="op">=</span><span class="fl">3</span>, fit<span class="op">=</span><span class="fl">3</span>, het<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>

<p>where the elements control the displayed number of digits for various aspects of the output, namely:</p>
<p></p><ul><li><p><code>est</code> for estimates (e.g., effect sizes, model coefficients, predicted values),</p></li>
<li><p><code>se</code> for standard errors,</p></li>
<li><p><code>test</code> for test statistics,</p></li>
<li><p><code>pval</code> for p-values,</p></li>
<li><p><code>ci</code> for confidence/prediction interval bounds,</p></li>
<li><p><code>var</code> for sampling variances and variance components,</p></li>
<li><p><code>sevar</code> for standard errors thereof,</p></li>
<li><p><code>fit</code> for fit statistics,</p></li>
<li><p><code>het</code> for heterogeneity statistics.</p></li>
</ul><p>Instead of setting this argument in each function call, one can use <code>setmfopt(digits = ...)</code> to set the desired number of digits for the various elements (see <code><a href="mfopt.html">mfopt</a></code> for getting and setting package options). For example, <code>setmfopt(digits = c(est=2, se=3, test=2, pval=3, ci=2, var=3, sevar=3, fit=3, het=3))</code> could be a sensible choice when analyzing various types of standardized effect size measures.</p>
<p></p>
</div>

<p></p><div class="section">
<h3 id="styled-output-with-the-crayon-package">Styled Output with the crayon Package<a class="anchor" aria-label="anchor" href="#styled-output-with-the-crayon-package"></a></h3>


<p>The <a href="https://cran.r-project.org/package=crayon" class="external-link">crayon</a> package provides a way to create colored output. The <span class="pkg">metafor</span> package is designed to automatically make use of this feature when the <code>crayon</code> package is installed (<code>install.packages("crayon")</code>) and loaded (<code><a href="https://github.com/r-lib/crayon#readme" class="external-link">library(crayon)</a></code>). Note that this only works on terminals that support ‘ANSI’ color/highlight codes (e.g., not under RGui on Windows or R.app on macOS, but the RStudio console and all modern terminals should support this).</p>
<p>The default color style that is used is quite plain, but should work with a light or dark colored background. One can modify the color style with <code>setmfopt(style = ...)</code>, where <code>...</code> is a list whose elements specify the styles for various parts of the output (see below for some examples and the documentation of the <code>crayon</code> package for the syntax to specify styles). The following elements are recognized:</p>
<p></p><ul><li><p><code>header</code> for the header of tables (underlined by default),</p></li>
<li><p><code>body1</code> for odd numbered rows in the body of tables,</p></li>
<li><p><code>body2</code> for even numbered rows in the body of tables,</p></li>
<li><p><code>na</code> for missing values in tables,</p></li>
<li><p><code>section</code> for section headers (bold by default),</p></li>
<li><p><code>text</code> for descriptive text in the output,</p></li>
<li><p><code>result</code> for the corresponding result(s),</p></li>
<li><p><code>stop</code> for errors (bold red by default),</p></li>
<li><p><code>warning</code> for warnings (yellow by default),</p></li>
<li><p><code>message</code> for messages (green by default),</p></li>
<li><p><code>verbose</code> for the text in verbose output (cyan by default),</p></li>
<li><p><code>legend</code> for legends (gray by default).</p></li>
</ul><p>Elements not specified are styled according to their defaults. For example, one could use:</p>
<p></p><div class="sourceCode"><pre><code><span><span class="fu"><a href="../reference/mfopt.html">setmfopt</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>header  <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"gray20"</span>, <span class="st">"underline"</span><span class="op">)</span>,</span>
<span>                      body1   <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray40"</span><span class="op">)</span>,</span>
<span>                      body2   <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray40"</span><span class="op">)</span>,</span>
<span>                      na      <span class="op">=</span> <span class="va">bold</span>,</span>
<span>                      section <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"gray15"</span>, <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>                      text    <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray50"</span><span class="op">)</span>,</span>
<span>                      result  <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray30"</span><span class="op">)</span>,</span>
<span>                      legend  <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray70"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>or</p>
<p></p><div class="sourceCode"><pre><code><span><span class="fu"><a href="../reference/mfopt.html">setmfopt</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>header  <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"gray80"</span>, <span class="st">"underline"</span><span class="op">)</span>,</span>
<span>                      body1   <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray60"</span><span class="op">)</span>,</span>
<span>                      body2   <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray60"</span><span class="op">)</span>,</span>
<span>                      na      <span class="op">=</span> <span class="va">bold</span>,</span>
<span>                      section <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"gray85"</span>, <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>                      text    <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray50"</span><span class="op">)</span>,</span>
<span>                      result  <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray70"</span><span class="op">)</span>,</span>
<span>                      legend  <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray30"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>for a light or dark colored background, respectively. A slightly more colorful style could be:</p>
<p></p><div class="sourceCode"><pre><code><span><span class="fu"><a href="../reference/mfopt.html">setmfopt</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>header  <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"snow"</span>, <span class="fu">make_style</span><span class="op">(</span><span class="st">"royalblue4"</span>, bg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      body1   <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"gray10"</span>, <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray95"</span>, bg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      body2   <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"gray10"</span>, <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray85"</span>, bg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      na      <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"orange4"</span>, <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>                      section <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"bold"</span>, <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray90"</span>, bg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      text    <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray40"</span><span class="op">)</span>,</span>
<span>                      result  <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"blue"</span><span class="op">)</span>,</span>
<span>                      legend  <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray70"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>or</p>
<p></p><div class="sourceCode"><pre><code><span><span class="fu"><a href="../reference/mfopt.html">setmfopt</a></span><span class="op">(</span>style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>header  <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"snow"</span>, <span class="fu">make_style</span><span class="op">(</span><span class="st">"royalblue4"</span>, bg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      body1   <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"gray90"</span>, <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray10"</span>, bg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      body2   <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"gray90"</span>, <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray15"</span>, bg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      na      <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"orange1"</span>, <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>                      section <span class="op">=</span> <span class="fu">combine_styles</span><span class="op">(</span><span class="st">"snow"</span>, <span class="st">"bold"</span>, <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray10"</span>, bg<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      text    <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray60"</span><span class="op">)</span>,</span>
<span>                      result  <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"steelblue1"</span><span class="op">)</span>,</span>
<span>                      legend  <span class="op">=</span> <span class="fu">make_style</span><span class="op">(</span><span class="st">"gray30"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>

<p>for a light and dark colored background, respectively.</p>
<p>The following code snippet includes all output elements (except for an error) and can be used to test out a chosen color style:</p>
<p></p><div class="sourceCode"><pre><code><span><span class="co"># calculate log risk ratios and corresponding sampling variances</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/escalc.html">escalc</a></span><span class="op">(</span>measure<span class="op">=</span><span class="st">"RR"</span>, ai<span class="op">=</span><span class="va">tpos</span>, bi<span class="op">=</span><span class="va">tneg</span>,</span>
<span>                            ci<span class="op">=</span><span class="va">cpos</span>, di<span class="op">=</span><span class="va">cneg</span>, data<span class="op">=</span><span class="fu"><a href="https://wviechtb.github.io/metadat/reference/dat.bcg.html" class="external-link">dat.bcg</a></span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">yi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span> <span class="co"># set one estimate to missing so we get a warning below</span></span>
<span><span class="va">dat</span></span>
<span></span>
<span><span class="co"># fit random-effects model</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rma.uni.html">rma</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, mods <span class="op">=</span> <span class="op">~</span> <span class="va">ablat</span>, data<span class="op">=</span><span class="va">dat</span>, verbose<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/print.rma.html">summary</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>

<p>For example, using the color scheme above (for a light colored background), the output should look like this:      <img src="figures/crayon1.png" width="800"><img src="figures/crayon2.png" width="800"></p>
<p>Note that support for 256 different colors and text formatting (such as underlined and bold text) differs across terminals.</p>
<p>To switch off output styling when the <code>crayon</code> package is loaded, use <code>setmfopt(style=FALSE</code>).</p>
<p></p>
</div>

<p></p><div class="section">
<h3 id="removing-empty-lines-before-and-after-the-output">Removing Empty Lines Before and After the Output<a class="anchor" aria-label="anchor" href="#removing-empty-lines-before-and-after-the-output"></a></h3>


<p>When printing output, an empty line is usually added before and after the output. For more compact output, this can be suppressed with <code>setmfopt(space=FALSE)</code> (see <code><a href="mfopt.html">mfopt</a></code> for getting and setting package options). For example, running the following code:</p>
<p></p><div class="sourceCode"><pre><code><span><span class="co"># calculate log risk ratios and corresponding sampling variances</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/escalc.html">escalc</a></span><span class="op">(</span>measure<span class="op">=</span><span class="st">"RR"</span>, ai<span class="op">=</span><span class="va">tpos</span>, bi<span class="op">=</span><span class="va">tneg</span>,</span>
<span>                            ci<span class="op">=</span><span class="va">cpos</span>, di<span class="op">=</span><span class="va">cneg</span>, data<span class="op">=</span><span class="fu"><a href="https://wviechtb.github.io/metadat/reference/dat.bcg.html" class="external-link">dat.bcg</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># fit a random-effects model</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rma.uni.html">rma</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="va">res</span></span>
<span></span>
<span><span class="fu"><a href="../reference/mfopt.html">setmfopt</a></span><span class="op">(</span>space<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">res</span></span></code></pre></div>

<p>shows the difference.</p>
<p></p>
</div>

<p></p><div class="section">
<h3 id="dark-mode-for-plots">Dark Mode for Plots<a class="anchor" aria-label="anchor" href="#dark-mode-for-plots"></a></h3>


<p>By default, plots created in <span style="R">R</span> have a white background and use black (and other darker colors) as the plotting color. Figures created with the <span class="pkg">metafor</span> package also adhere to this standard. However, all plotting functions in the package are designed in such a way that switching to a dark background is easily possible. For this, one should set the canvas/figure background to a dark color (e.g., <code>"black"</code> or <code>"gray10"</code>) and the foreground color to some bright color (e.g., <code>"gray90"</code>, <code>"gray95"</code>, or <code>"white"</code>). This can be easily accomplished with <code>setmfopt(theme="custom", fg="gray95", bg="gray10")</code> (see <code><a href="mfopt.html">mfopt</a></code> for getting and setting package options).</p>
<p>Figures that make use of additional colors for various plot elements will by default then use colors that are compatible with the chosen background. For example, the following two figures illustrate the difference between the two styles:</p>
<p><img src="figures/plots-light.png" width="800"><img src="figures/plots-dark.png" width="800"></p>
<p></p>
<p>By setting <code>setmfopt(theme="dark")</code>, all plots created by the package will automatically use a dark mode. RStudio users can also set <code>setmfopt(theme="auto")</code>, in which case plotting colors are chosen depending on the RStudio theme used (for some themes, setting this to <code>"auto2"</code> might be aesthetically more pleasing).</p>
<p></p>
</div>

<p></p><div class="section">
<h3 id="version-check">Version Check<a class="anchor" aria-label="anchor" href="#version-check"></a></h3>


<p>When loading the <span class="pkg">metafor</span> package in an <code><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></code> session, an automatic check is carried out to compare the version number of the installed package with the one available on <a href="https://cran.r-project.org/package=metafor" class="external-link">CRAN</a>. If the installed version is older than the one available on CRAN, the user is notified that a new version is available. This check can be suppressed by setting the environment variable <code class="env">METAFOR_VERSION_CHECK</code> to <code>FALSE</code> (e.g., with <code>Sys.setenv(METAFOR_VERSION_CHECK=FALSE)</code>) or with <code>options(metafor=list(check=FALSE))</code> before loading the package (see <code><a href="mfopt.html">mfopt</a></code> for getting and setting package options).</p>
<p>By setting the environment variable to <code>"devel"</code> (e.g., with <code>Sys.setenv(METAFOR_VERSION_CHECK="devel")</code>) or with <code>options(metafor=list(check="devel"))</code>, the version check is run against the ‘development version’ of the package available on <a href="https://github.com/wviechtb/metafor" class="external-link">GitHub</a>.</p>
<p></p>
</div>

<p></p><div class="section">
<h3 id="model-fitting-processing-time">Model Fitting / Processing Time<a class="anchor" aria-label="anchor" href="#model-fitting-processing-time"></a></h3>


<p>The various model fitting functions (i.e., <code><a href="rma.uni.html">rma.uni</a></code>, <code><a href="rma.mh.html">rma.mh</a></code>, <code><a href="rma.peto.html">rma.peto</a></code>, <code><a href="rma.glmm.html">rma.glmm</a></code>, <code><a href="rma.mv.html">rma.mv</a></code>, and <code><a href="selmodel.html">selmodel</a></code>) and various other functions (e.g., <code><a href="confint.rma.html">confint</a></code>, <code><a href="cumul.html">cumul</a></code>, <code><a href="leave1out.html">leave1out</a></code>, <code><a href="profile.rma.html">profile</a></code>, <code><a href="residuals.rma.html">rstudent</a></code>) automatically keep track of the model fitting / processing time. This information is stored as element <code>time</code> (in seconds) in the object that is returned. One can also use argument <code>time=TRUE</code> to nicely print this information. For example:</p>
<p></p><div class="sourceCode"><pre><code><span><span class="co"># fit multilevel mixed-effects meta-regression model and print the processing time</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rma.mv.html">rma.mv</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, mods <span class="op">=</span> <span class="op">~</span> <span class="va">condition</span>,</span>
<span>              random <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">~</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">article</span><span class="op">/</span><span class="va">experiment</span><span class="op">/</span><span class="va">sample</span><span class="op">/</span><span class="va">id</span>, <span class="op">~</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">pairing</span><span class="op">)</span>,</span>
<span>              data<span class="op">=</span><span class="fu"><a href="https://wviechtb.github.io/metadat/reference/dat.mccurdy2020.html" class="external-link">dat.mccurdy2020</a></span>, sparse<span class="op">=</span><span class="cn">TRUE</span>, digits<span class="op">=</span><span class="fl">3</span>, time<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract the processing time (should take somewhere around 10-20 seconds on a modern CPU)</span></span>
<span><span class="va">res</span><span class="op">$</span><span class="va">time</span></span></code></pre></div>

<p></p>
</div>

<p></p><div class="section">
<h3 id="model-object-sizes">Model Object Sizes<a class="anchor" aria-label="anchor" href="#model-object-sizes"></a></h3>


<p>The objects returned by model fitting functions like <code><a href="rma.uni.html">rma.uni</a></code>, <code><a href="rma.mh.html">rma.mh</a></code>, <code><a href="rma.peto.html">rma.peto</a></code>, <code><a href="rma.glmm.html">rma.glmm</a></code>, and <code><a href="rma.mv.html">rma.mv</a></code> contain information that is needed by some of the method functions that can be applied to such objects, but that can lead to objects that are relatively large in size. As an example, the model objects that are created as part of the example code for <code><a href="https://wviechtb.github.io/metadat/reference/dat.moura2021.html" class="external-link">dat.moura2021</a></code> are approximately 120MB in size. To reduce the object size, one can make use of the (undocumented) argument <code>outlist</code>. When setting <code>outlist="minimal"</code>, the resulting object contains only the minimal information needed to print the object (which results in an object that is around 13KB in size). Alternatively, one can set <code>outlist</code> to a string that specifies what objects that are created within the model fitting function should be returned (and under which name). For example, <code>outlist="coef=beta, vcov=vb"</code> would indicate that only the model coefficient(s) (with name <code>coef</code>) and the corresponding variance-covariance matrix (with name <code>vcov</code>) should be returned (the resulting object then is only around 2KB in size). Note that this requires knowledge of how objects within the model fitting function are named, so inspection of the source code of a function will then be necessary. Also, there is no guarantee that method functions will still work when including only a subset of the information that is typically stored in model objects.</p>
<p></p>
</div>

<p></p><div class="section">
<h3 id="load-balancing">Load Balancing<a class="anchor" aria-label="anchor" href="#load-balancing"></a></h3>


<p>Several functions in the <span class="pkg">metafor</span> package can make use of parallel processing (e.g., <code><a href="profile.rma.html">profile</a></code>) to speed up intensive computations on machines with multiple cores. When using <code>parallel="snow"</code>, the default is to use the <code><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parLapply</a></code> function from the <code><a href="https://rdrr.io/r/parallel/parallel-package.html" class="external-link">parallel</a></code> package for this purpose. In some cases (especially when the parallelized computations take up quite variable amounts of time to complete), using ‘load balancing’ may help to speed things up further (by using the <code><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parLapplyLB</a></code> function). This can be enabled with <code>pbapply::pboptions(use_lb=TRUE)</code> before running the function that makes use of parallel processing. Whether this really does speed things up depends on many factors and is hard to predict.</p>
<p></p>
</div>


    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Wolfgang Viechtbauer <a href="mailto:wvb@metafor-project.org">wvb@metafor-project.org</a> <a href="https://www.metafor-project.org" class="external-link">https://www.metafor-project.org</a></p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1–48. <a href="https://doi.org/10.18637/jss.v036.i03" class="external-link">https://doi.org/10.18637/jss.v036.i03</a></p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    appId: 'SFWCWKDGL8',
    
    apiKey: 'b56f56470243cf9799f796a3d6ecaedd',
    indexName: 'metafor',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

