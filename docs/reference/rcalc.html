<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Calculate the Variance-Covariance of Dependent Correlation Coefficients — rcalc • metafor</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Calculate the Variance-Covariance of Dependent Correlation Coefficients — rcalc"><meta property="og:description" content="Function to calculate the variance-covariance matrix of correlation coefficients computed based on the same sample of subjects. "><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wviechtb"><meta name="twitter:site" content="@wviechtb"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="../darkswitch.js"></script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.3-22</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/article/view/v036i03" class="external-link">JSS Article</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        <li>
  <a href="https://twitter.com/wviechtb" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
        
        


      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate the Variance-Covariance of Dependent Correlation Coefficients</h1>
    
    <div class="hidden name"><code>rcalc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to calculate the variance-covariance matrix of correlation coefficients computed based on the same sample of subjects. <script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rcalc</span><span class="op">(</span><span class="va">x</span>, <span class="va">ni</span>, <span class="va">data</span>, rtoz<span class="op">=</span><span class="cn">FALSE</span>, nfun<span class="op">=</span><span class="st">"min"</span>, sparse<span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>a formula of the form <code>ri ~ var1 + var2 | study</code>. Can also be a correlation matrix or list thereof. See ‘Details’.</p></dd>

   <dt>ni</dt>
<dd><p>vector to specify the sample sizes based on which the correlations were computed.</p></dd>

   <dt>data</dt>
<dd><p>data frame containing the variables specified via the formula (and the sample sizes).</p></dd>

   <dt>rtoz</dt>
<dd><p>logical to specify whether to transform the correlations via Fisher's r-to-z transformation (the default is <code>FALSE</code>).</p></dd>

   <dt>nfun</dt>
<dd><p>a character string to specify how the ‘common’ sample size within each study should be computed. Possible options are <code>"min"</code> (for the minimum), <code>"harmonic"</code> (for the harmonic mean), or <code>"mean"</code> (for the arithmetic mean). Can also be a function. See ‘Details’.</p></dd>

   <dt>sparse</dt>
<dd><p>logical to specify whether the variance-covariance matrix should be returned as a sparse matrix (the default is <code>FALSE</code>).</p></dd>

   <dt>...</dt>
<dd><p>other arguments.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>A meta-analysis of correlation coefficients may involve multiple correlation coefficients extracted from the same study. When these correlations are computed based on the same sample of subjects, then they are typically not independent. The <code>rcalc</code> function can be used to create a dataset with the correlation coefficients (possibly transformed with Fisher's r-to-z transformation) and the corresponding variance-covariance matrix. The dataset and variance-covariance matrix can then be further meta-analyzed using the <code><a href="rma.mv.html">rma.mv</a></code> function.</p>
<p>When computing the covariance between two correlation coefficients, we can distinguish two cases:</p><ol><li><p>In the first case, one of the variables involved in the two correlation coefficients is the same. For example, in <em></em>\(r_{12}\) and <em></em>\(r_{13}\), variable 1 is common to both correlation coefficients. This is sometimes called the (partially) ‘overlapping’ case. The covariance between the two correlation coefficients, <em></em>\(\mbox{Cov}[r_{12}, r_{13}]\), then depends on the degree of correlation between variables 2 and 3 (i.e., <em></em>\(r_{23}\)).</p></li>
<li><p>In the second case, none of the variables are common to both correlation coefficients. For example, this would be the case if we have correlations <em></em>\(r_{12}\) and <em></em>\(r_{34}\) based on 4 variables. This is sometimes called the ‘non-overlapping’ case. The covariance between the two correlation coefficients, <em></em>\(\mbox{Cov}[r_{12}, r_{34}]\), then depends on <em></em>\(r_{13}\), <em></em>\(r_{14}\), <em></em>\(r_{23}\), and <em></em>\(r_{24}\).</p></li>
</ol><p>Equations to compute these covariances can be found, for example, in Steiger (1980) and Olkin and Finn (1990).</p>
<p>To use the <code>rcalc</code> function, one needs to construct a data frame that contains a study identifier (say <code>study</code>), two variable identifiers (say <code>var1</code> and <code>var2</code>), the corresponding correlation coefficients (say <code>ri</code>), and the sample sizes based on which the correlation coefficients were computed (say <code>ni</code>). Then the first argument should be a formula of the form <code>ri ~ var1 + var2 | study</code>, argument <code>ni</code> is set equal to the variable name containing the sample sizes, and the data frame containing these variables is specified via the <code>data</code> argument. When using the function for a single study, one can leave out the study identifier from the formula.</p>
<p>When argument <code>rtoz</code> is set to <code>TRUE</code>, then the correlations are transformed with Fisher's r-to-z transformation (Fisher, 1921) and the variance-covariance matrix is computed for the transformed values.</p>
<p>In some cases, the sample size may not be identical within a study (e.g., <em></em>\(r_{12}\) may have been computed based on 120 subjects while <em></em>\(r_{13}\) was computed based on 118 subjects due to 2 missing values in variable 3). For constructing the variance-covariance matrix, we need to assume a ‘common’ sample size for all correlation coefficients within the study. Argument <code>nfun</code> provides some options for how the common sample size should be computed. Possible options are <code>"min"</code> (for using the minimum sample size within a study as the common sample size), <code>"harmonic"</code> (for using the harmonic mean), or <code>"mean"</code> (for using the arithmetic mean). The default is <code>"min"</code>, which is a conservative choice (i.e., it will overestimate the sampling variances of coefficients that were computed based on a sample size that was actually larger than the minimum sample size). One can also specify a function via the <code>nfun</code> argument (which should take a numeric vector as input and return a single value).</p>
<p>Instead of specifying a formula, one can also pass a correlation matrix to the function via argument <code>x</code>. Argument <code>ni</code> then specifies the (common) sample size based on which the elements in the correlation matrix were computed. One can also pass a list of correlation matrices via argument <code>x</code>, in which case argument <code>ni</code> should be a vector of sample sizes of the same length as <code>x</code>.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list containing the following components:</p>
<dl><dt>dat</dt>
<dd><p>a data frame with the study identifier, the two variable identifiers, a variable pair identifier, the correlation coefficients (possibly transformed with Fisher's r-to-z transformation), and the (common) sample sizes.</p></dd>

   <dt>V</dt>
<dd><p>corresponding variance-covariance matrix (given as a sparse matrix when <code>sparse=TRUE</code>).</p></dd>


</dl><p>Note that a particular covariance can only be computed when all of the correlation coefficients involved in the covariance equation are included in the dataset. If one or more coefficients needed for the computation are missing, then the resulting covariance will also be missing (i.e., <code>NA</code>).</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>For raw correlation coefficients, the variance-covariance matrix is computed with <em></em>\(n-1\) in the denominator (instead of <em></em>\(n\) as suggested in Steiger, 1980, and Olkin &amp; Finn, 1990). This is more consistent with the usual equation for computing the sampling variance of a correlation coefficient (which also typically uses <em></em>\(n-1\) in the denominator).</p>
<p>For raw and r-to-z transformed coefficients, the variance-covariance matrix will only be computed when the (common) sample size for a study is at least 5.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Wolfgang Viechtbauer <a href="mailto:wvb@metafor-project.org">wvb@metafor-project.org</a> <a href="https://www.metafor-project.org" class="external-link">https://www.metafor-project.org</a></p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Fisher, R. A. (1921). On the “probable error” of a coefficient of correlation deduced from a small sample. <em>Metron</em>, <b>1</b>, 1–32. <a href="http://hdl.handle.net/2440/15169" class="external-link">http://hdl.handle.net/2440/15169</a></p>
<p>Olkin, I., &amp; Finn, J. D. (1990). Testing correlated correlations. <em>Psychological Bulletin</em>, <b>108</b>(2), 330–333. <a href="https://doi.org/10.1037/0033-2909.108.2.330" class="external-link">https://doi.org/10.1037/0033-2909.108.2.330</a></p>
<p>Steiger, J. H. (1980). Tests for comparing elements of a correlation matrix. <em>Psychological Bulletin</em>, <b>87</b>(2), 245–251. <a href="https://doi.org/10.1037/0033-2909.87.2.245" class="external-link">https://doi.org/10.1037/0033-2909.87.2.245</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="rma.mv.html">rma.mv</a></code> for a model fitting function that can be used to meta-analyze dependent correlation coefficients.</p>
<p><code><a href="https://wviechtb.github.io/metadat/reference/dat.craft2003.html" class="external-link">dat.craft2003</a></code> for an illustrative example.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">############################################################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### copy data into 'dat' and examine the first 12 rows</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wviechtb.github.io/metadat/reference/dat.craft2003.html" class="external-link">dat.craft2003</a></span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fl">12</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    study  ni sport    ri var1 var2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1 142     I -0.55 acog perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1 142     I -0.48 asom perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1 142     I  0.66 conf perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1 142     I  0.47 acog asom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1 142     I -0.38 acog conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1 142     I -0.46 asom conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3  37     I  0.53 acog perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3  37     I -0.12 asom perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3  37     I  0.03 conf perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     3  37     I  0.52 acog asom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     3  37     I -0.48 acog conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     3  37     I -0.40 asom conf</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### construct dataset and var-cov matrix of the correlations</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">rcalc</span><span class="op">(</span><span class="va">ri</span> <span class="op">~</span> <span class="va">var1</span> <span class="op">+</span> <span class="va">var2</span> <span class="op">|</span> <span class="va">study</span>, ni<span class="op">=</span><span class="va">ni</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">V</span> <span class="op">&lt;-</span> <span class="va">tmp</span><span class="op">$</span><span class="va">V</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">tmp</span><span class="op">$</span><span class="va">dat</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### examine data and var-cov matrix for study 1</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">study</span> <span class="op">==</span> <span class="fl">1</span>,<span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   study var1 var2 var1.var2    yi  ni</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1 acog perf acog.perf -0.55 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1 asom perf asom.perf -0.48 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1 conf perf conf.perf  0.66 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1 acog asom acog.asom  0.47 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1 acog conf acog.conf -0.38 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     1 asom conf asom.conf -0.46 142</span>
<span class="r-in"><span><span class="fu"><a href="blsplit.html">blsplit</a></span><span class="op">(</span><span class="va">V</span>, <span class="va">dat</span><span class="op">$</span><span class="va">study</span>, <span class="va">round</span>, <span class="fl">4</span><span class="op">)</span><span class="op">$</span><span class="va">`1`</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           acog.perf asom.perf conf.perf acog.asom acog.conf asom.conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.perf    0.0035    0.0013   -0.0006   -0.0014    0.0025    0.0009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.perf    0.0013    0.0042   -0.0010   -0.0019    0.0013    0.0025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> conf.perf   -0.0006   -0.0010    0.0023    0.0006   -0.0015   -0.0011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.asom   -0.0014   -0.0019    0.0006    0.0043   -0.0018   -0.0012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.conf    0.0025    0.0013   -0.0015   -0.0018    0.0052    0.0019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.conf    0.0009    0.0025   -0.0011   -0.0012    0.0019    0.0044</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### examine data and var-cov matrix for study 6</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">study</span> <span class="op">==</span> <span class="fl">6</span>,<span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    study var1 var2 var1.var2   yi ni</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     6 acog perf acog.perf 0.44 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     6 asom perf asom.perf 0.46 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     6 conf perf conf.perf   NA 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     6 acog asom acog.asom 0.67 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     6 acog conf acog.conf   NA 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     6 asom conf asom.conf   NA 16</span>
<span class="r-in"><span><span class="fu"><a href="blsplit.html">blsplit</a></span><span class="op">(</span><span class="va">V</span>, <span class="va">dat</span><span class="op">$</span><span class="va">study</span>, <span class="va">round</span>, <span class="fl">4</span><span class="op">)</span><span class="op">$</span><span class="va">`6`</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           acog.perf asom.perf conf.perf acog.asom acog.conf asom.conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.perf    0.0434    0.0256        NA    0.0095        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.perf    0.0256    0.0414        NA    0.0085        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> conf.perf        NA        NA        NA        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.asom    0.0095    0.0085        NA    0.0202        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.conf        NA        NA        NA        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.conf        NA        NA        NA        NA        NA        NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### examine data and var-cov matrix for study 17</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">study</span> <span class="op">==</span> <span class="fl">17</span>,<span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    study var1 var2 var1.var2    yi ni</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25    17 acog perf acog.perf  0.10 45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26    17 asom perf asom.perf  0.31 45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27    17 conf perf conf.perf -0.17 45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28    17 acog asom acog.asom    NA 45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29    17 acog conf acog.conf    NA 45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30    17 asom conf asom.conf    NA 45</span>
<span class="r-in"><span><span class="fu"><a href="blsplit.html">blsplit</a></span><span class="op">(</span><span class="va">V</span>, <span class="va">dat</span><span class="op">$</span><span class="va">study</span>, <span class="va">round</span>, <span class="fl">4</span><span class="op">)</span><span class="op">$</span><span class="va">`17`</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           acog.perf asom.perf conf.perf acog.asom acog.conf asom.conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.perf    0.0223        NA        NA        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.perf        NA    0.0186        NA        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> conf.perf        NA        NA    0.0214        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.asom        NA        NA        NA        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.conf        NA        NA        NA        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.conf        NA        NA        NA        NA        NA        NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">############################################################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### copy data into 'dat' and examine the first 12 rows</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wviechtb.github.io/metadat/reference/dat.craft2003.html" class="external-link">dat.craft2003</a></span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fl">12</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    study  ni sport    ri var1 var2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1 142     I -0.55 acog perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1 142     I -0.48 asom perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1 142     I  0.66 conf perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1 142     I  0.47 acog asom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1 142     I -0.38 acog conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1 142     I -0.46 asom conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3  37     I  0.53 acog perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3  37     I -0.12 asom perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3  37     I  0.03 conf perf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     3  37     I  0.52 acog asom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     3  37     I -0.48 acog conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     3  37     I -0.40 asom conf</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### restructure data from study 1 into a correlation matrix</span></span></span>
<span class="r-in"><span><span class="va">R1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">R1</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">lower.tri</a></span><span class="op">(</span><span class="va">R1</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">$</span><span class="va">ri</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">study</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">R1</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">upper.tri</a></span><span class="op">(</span><span class="va">R1</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">R1</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">upper.tri</a></span><span class="op">(</span><span class="va">R1</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">R1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">R1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"perf"</span>, <span class="st">"acog"</span>, <span class="st">"asom"</span>, <span class="st">"conf"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">R1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       perf  acog  asom  conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> perf  1.00 -0.55 -0.48  0.66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog -0.55  1.00  0.47 -0.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom -0.48  0.47  1.00 -0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> conf  0.66 -0.38 -0.46  1.00</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### restructure data from study 3 into a correlation matrix</span></span></span>
<span class="r-in"><span><span class="va">R3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">R3</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">lower.tri</a></span><span class="op">(</span><span class="va">R3</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">$</span><span class="va">ri</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">study</span> <span class="op">==</span> <span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">R3</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">upper.tri</a></span><span class="op">(</span><span class="va">R3</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">R3</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lower.tri.html" class="external-link">upper.tri</a></span><span class="op">(</span><span class="va">R3</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">R3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">R3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"perf"</span>, <span class="st">"acog"</span>, <span class="st">"asom"</span>, <span class="st">"conf"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">R3</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       perf  acog  asom  conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> perf  1.00  0.53 -0.12  0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog  0.53  1.00  0.52 -0.48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom -0.12  0.52  1.00 -0.40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> conf  0.03 -0.48 -0.40  1.00</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### an example where a correlation matrix is passed to rcalc()</span></span></span>
<span class="r-in"><span><span class="fu">rcalc</span><span class="op">(</span><span class="va">R1</span>, ni<span class="op">=</span><span class="fl">142</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $dat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   var1 var2 var1.var2    yi  ni</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 acog perf acog.perf -0.55 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 asom perf asom.perf -0.48 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 conf perf conf.perf  0.66 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 acog asom acog.asom  0.47 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 acog conf acog.conf -0.38 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 asom conf asom.conf -0.46 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $V</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               acog.perf     asom.perf     conf.perf     acog.asom    acog.conf     asom.conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.perf  0.0034503989  0.0013265149 -0.0005545798 -0.0013967848  0.002501895  0.0009322372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.perf  0.0013265149  0.0042005969 -0.0009521407 -0.0019433591  0.001264856  0.0025160783</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> conf.perf -0.0005545798 -0.0009521407  0.0022592011  0.0005791091 -0.001533798 -0.0010692460</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.asom -0.0013967848 -0.0019433591  0.0005791091  0.0043049419 -0.001802689 -0.0012050560</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.conf  0.0025018954  0.0012648562 -0.0015337979 -0.0018026891  0.005191854  0.0018844047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.conf  0.0009322372  0.0025160783 -0.0010692460 -0.0012050560  0.001884405  0.0044083302</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### an example where a list of correlation matrices is passed to rcalc()</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">rcalc</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"1"</span><span class="op">=</span><span class="va">R1</span>,<span class="st">"3"</span><span class="op">=</span><span class="va">R3</span><span class="op">)</span>, ni<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">142</span>,<span class="fl">37</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">V</span> <span class="op">&lt;-</span> <span class="va">tmp</span><span class="op">$</span><span class="va">V</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">tmp</span><span class="op">$</span><span class="va">dat</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### examine data and var-cov matrix for study 1</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="fl">1</span>,<span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id var1 var2 var1.var2    yi  ni</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1 acog perf acog.perf -0.55 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  1 asom perf asom.perf -0.48 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  1 conf perf conf.perf  0.66 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  1 acog asom acog.asom  0.47 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  1 acog conf acog.conf -0.38 142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  1 asom conf asom.conf -0.46 142</span>
<span class="r-in"><span><span class="fu"><a href="blsplit.html">blsplit</a></span><span class="op">(</span><span class="va">V</span>, <span class="va">dat</span><span class="op">$</span><span class="va">id</span>, <span class="va">round</span>, <span class="fl">4</span><span class="op">)</span><span class="op">$</span><span class="va">`1`</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           acog.perf asom.perf conf.perf acog.asom acog.conf asom.conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.perf    0.0035    0.0013   -0.0006   -0.0014    0.0025    0.0009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.perf    0.0013    0.0042   -0.0010   -0.0019    0.0013    0.0025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> conf.perf   -0.0006   -0.0010    0.0023    0.0006   -0.0015   -0.0011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.asom   -0.0014   -0.0019    0.0006    0.0043   -0.0018   -0.0012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.conf    0.0025    0.0013   -0.0015   -0.0018    0.0052    0.0019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.conf    0.0009    0.0025   -0.0011   -0.0012    0.0019    0.0044</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### examine data and var-cov matrix for study 3</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="fl">3</span>,<span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id var1 var2 var1.var2    yi ni</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   3 acog perf acog.perf  0.53 37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   3 asom perf asom.perf -0.12 37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   3 conf perf conf.perf  0.03 37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  3 acog asom acog.asom  0.52 37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  3 acog conf acog.conf -0.48 37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  3 asom conf asom.conf -0.40 37</span>
<span class="r-in"><span><span class="fu"><a href="blsplit.html">blsplit</a></span><span class="op">(</span><span class="va">V</span>, <span class="va">dat</span><span class="op">$</span><span class="va">id</span>, <span class="va">round</span>, <span class="fl">4</span><span class="op">)</span><span class="op">$</span><span class="va">`3`</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           acog.perf asom.perf conf.perf acog.asom acog.conf asom.conf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.perf    0.0144    0.0106   -0.0097   -0.0032    0.0021    0.0034</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.perf    0.0106    0.0270   -0.0109    0.0109   -0.0020    0.0001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> conf.perf   -0.0097   -0.0109    0.0277   -0.0013    0.0114   -0.0027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.asom   -0.0032    0.0109   -0.0013    0.0148   -0.0044   -0.0066</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> acog.conf    0.0021   -0.0020    0.0114   -0.0044    0.0165    0.0079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> asom.conf    0.0034    0.0001   -0.0027   -0.0066    0.0079    0.0196</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">############################################################################</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    appId: 'SFWCWKDGL8',
    
    apiKey: 'b56f56470243cf9799f796a3d6ecaedd',
    indexName: 'metafor',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

