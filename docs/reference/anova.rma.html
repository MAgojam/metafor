<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Likelihood Ratio and Wald-Type Tests for 'rma' Objects — anova.rma • metafor</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="../darkswitch.js"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Likelihood Ratio and Wald-Type Tests for 'rma' Objects — anova.rma"><meta property="og:description" content='For two (nested) models of class "rma.uni" or "rma.mv", the function provides a full versus reduced model comparison in terms of model fit statistics and a likelihood ratio test. When a single model is specified, a Wald-type test of one or more model coefficients or linear combinations thereof is carried out. '><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wviechtb"><meta name="twitter:site" content="@wviechtb"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.1-27</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/index.php/jss/article/view/v036i03/v36i03.pdf" class="external-link">JSS Article (pdf)</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        <li>
  <a href="https://twitter.com/wviechtb" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
        
        


      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Likelihood Ratio and Wald-Type Tests for 'rma' Objects</h1>
    
    <div class="hidden name"><code>anova.rma.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>For two (nested) models of class <code>"rma.uni"</code> or <code>"rma.mv"</code>, the function provides a full versus reduced model comparison in terms of model fit statistics and a likelihood ratio test. When a single model is specified, a Wald-type test of one or more model coefficients or linear combinations thereof is carried out. <script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script></p>
    </div>

    <div class="ref-usage sourceCode"><pre class="sourceCode r"><code><span class="co"># S3 method for rma</span>
<span class="fu">anova</span><span class="op">(</span><span class="va">object</span>, <span class="va">object2</span>, <span class="va">btt</span>, <span class="va">X</span>, <span class="va">att</span>, <span class="va">Z</span>, <span class="va">digits</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>

    <div id="ref-sections">
    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>an object of class <code>"rma.uni"</code> or <code>"rma.mv"</code>.</p></dd>
<dt>object2</dt>
<dd><p>an (optional) object of class <code>"rma.uni"</code> or <code>"rma.mv"</code>. See ‘Details’.</p></dd>
<dt>btt</dt>
<dd><p>optional vector of indices to specify which coefficients should be included in the Wald-type test. Can also be a string to <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></code> for. See ‘Details’.</p></dd>
<dt>X</dt>
<dd><p>optional numeric vector or matrix to specify one or more linear combinations of the coefficients in the model that should be tested. See ‘Details’.</p></dd>
<dt>att</dt>
<dd><p>optional vector of indices to specify which scale coefficients should be included in the Wald-type test. Can also be a string to <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></code> for. See ‘Details’. Only relevant for location-scale models (see <code><a href="rma.uni.html">rma.uni</a></code>).</p></dd>
<dt>Z</dt>
<dd><p>optional numeric vector or matrix to specify one or more linear combinations of the scale coefficients in the model that should be tested. See ‘Details’. Only relevant for location-scale models (see <code><a href="rma.uni.html">rma.uni</a></code>).</p></dd>
<dt>digits</dt>
<dd><p>integer to specify the number of decimal places to which the printed results should be rounded. If unspecified, the default is to take the value from the object.</p></dd>
<dt>...</dt>
<dd><p>other arguments.</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>When a single model is specified, the function provides Wald-type tests of one or more model coefficients or linear combinations thereof.</p>
<p>In particular, for a fixed- or random-effects model (i.e., a model without moderators), this is just the test of the single coefficient of the model. For models including moderators, an omnibus test of all model coefficients is conducted that excludes the intercept (the first coefficient) if it is included in the model. If no intercept is included in the model, then the omnibus test includes all coefficients in the model including the first.</p>
<p>Alternatively, one can manually specify the indices of the coefficients to test via the <code>btt</code> argument. For example, with <code>btt=c(3,4)</code>, only the third and fourth coefficient from the model would be included in the test (if an intercept is included in the model, then it corresponds to the first coefficient in the model). Instead of specifying the coefficient numbers, one can specify a string for <code>btt</code>. In that case, <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></code> will be used to search for all coefficient names that match the string. Using the <code>btt</code> argument, one can for example select all coefficients corresponding to a particular factor to test if the factor as a whole is significant. See ‘Examples’.</p>
<p>Instead, one can use the <code>X</code> argument to specify a linear combination of the coefficients in the model that should be tested (i.e., whether the linear combination is significantly different from zero). If a matrix of linear combinations is specified, each row defines a particular linear combination to be tested. If the matrix is of full rank, an omnibus Wald-type test of all linear combinations is also provided. Linear combinations can also be obtained with the <code><a href="predict.rma.html">predict.rma</a></code> function, which will provide corresponding confidence intervals.</p>
<p>When specifying two models for comparison, the function provides a likelihood ratio test (LRT) comparing the two models. The two models must be based on the same set of data, must be of the same class, and should be nested for the LRT to make sense. Note that LRTs are not meaningful when using REML estimation and the two models differ in their fixed effects. Also, the theory underlying LRTs is only really applicable when comparing models that were fitted with ML/REML estimation.</p>
<p>For location-scale models fitted with the <code><a href="rma.uni.html">rma.uni</a></code> function, one can use <code>att</code> to specify the indices of the scale coefficients to test. Similarly, one can use the <code>Z</code> argument to specify one or multiple linear combinations of the scale coefficients in the model that should be tested.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    <p>An object of class <code>"anova.rma"</code>. When a single model is specified (without any further arguments or together with the <code>btt</code> or <code>att</code> argument), the object is a list containing the following components:</p>
<dl><dt>QM</dt>
<dd><p>test statistic of the Wald-type test of the model coefficients.</p></dd>
<dt>QMdf</dt>
<dd><p>corresponding degrees of freedom.</p></dd>
<dt>QMp</dt>
<dd><p>corresponding p-value.</p></dd>
<dt>btt</dt>
<dd><p>indices of the coefficients tested by the Wald-type test.</p></dd>
<dt>k</dt>
<dd><p>number of outcomes included in the analysis.</p></dd>
<dt>p</dt>
<dd><p>number of coefficients in the model (including the intercept).</p></dd>
<dt>m</dt>
<dd><p>number of coefficients included in the Wald-type test.</p></dd>
<dt>...</dt>
<dd><p>some additional elements/values.</p></dd>
</dl><p>When argument <code>X</code> is used, the object is a list containing the following components:</p>
<dl><dt>QM</dt>
<dd><p>test statistic of the omnibus Wald-type test of all linear combinations.</p></dd>
<dt>QMdf</dt>
<dd><p>corresponding degrees of freedom.</p></dd>
<dt>QMp</dt>
<dd><p>corresponding p-value.</p></dd>
<dt>hyp</dt>
<dd><p>description of the linear combinations tested.</p></dd>
<dt>Xb</dt>
<dd><p>values of the linear combinations.</p></dd>
<dt>se</dt>
<dd><p>standard errors of the linear combinations.</p></dd>
<dt>zval</dt>
<dd><p>test statistics of the linear combinations.</p></dd>
<dt>pval</dt>
<dd><p>corresponding p-values.</p></dd>
</dl><p>When two models are specified, the object is a list containing the following components:</p>
<dl><dt>fit.stats.f</dt>
<dd><p>log-likelihood, deviance, AIC, BIC, and AICc for the full model.</p></dd>
<dt>fit.stats.r</dt>
<dd><p>log-likelihood, deviance, AIC, BIC, and AICc for the reduced model.</p></dd>
<dt>parms.f</dt>
<dd><p>number of parameters in the full model.</p></dd>
<dt>parms.r</dt>
<dd><p>number of parameters in the reduced model.</p></dd>
<dt>LRT</dt>
<dd><p>likelihood ratio test statistic.</p></dd>
<dt>pval</dt>
<dd><p>corresponding p-value.</p></dd>
<dt>QE.f</dt>
<dd><p>test statistic of the test for (residual) heterogeneity from the full model.</p></dd>
<dt>QE.r</dt>
<dd><p>test statistic of the test for (residual) heterogeneity from the reduced model.</p></dd>
<dt>tau2.f</dt>
<dd><p>estimated \(\tau^2\) value from the full model. <code>NA</code> for <code>"rma.mv"</code> objects.</p></dd>
<dt>tau2.r</dt>
<dd><p>estimated \(\tau^2\) value from the reduced model. <code>NA</code> for <code>"rma.mv"</code> objects.</p></dd>
<dt>R2</dt>
<dd><p>amount (in percent) of the heterogeneity in the reduced model that is accounted for in the full model (<code>NA</code> for fixed-effects models or for <code>"rma.mv"</code> objects). This can be regarded as a pseudo \(R^2\) statistic (Raudenbush, 2009). Note that the value may not be very accurate unless \(k\) is large (Lopez-Lopez et al., 2014).</p></dd>
<dt>...</dt>
<dd><p>some additional elements/values.</p></dd>
</dl><p>The results are formatted and printed with the <code><a href="print.anova.rma.html">print.anova.rma</a></code> function.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The function can also be used to conduct a likelihood ratio test (LRT) for the amount of (residual) heterogeneity in random- and mixed-effects models. The full model should then be fitted with either <code>method="ML"</code> or <code>method="REML"</code> and the reduced model with <code>method="FE"</code>. The p-value for the test is based on a chi-square distribution with 1 degree of freedom, but actually needs to be adjusted for the fact that the parameter (i.e., \(\tau^2\)) falls on the boundary of the parameter space under the null hypothesis (see Viechtbauer, 2007, for more details).</p>
<p>LRTs for variance components in more complex models (as fitted with the <code><a href="rma.mv.html">rma.mv</a></code> function) can also be conducted in this manner (see ‘Examples’).</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Wolfgang Viechtbauer <a href="mailto:wvb@metafor-project.org">wvb@metafor-project.org</a> <a href="https://www.metafor-project.org" class="external-link">https://www.metafor-project.org</a></p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Hardy, R. J., &amp; Thompson, S. G. (1996). A likelihood approach to meta-analysis with random effects. <em>Statistics in Medicine</em>, <b>15</b>(6), 619--629. <a href="https://doi.org/10.1002/(sici)1097-0258(19960330)15:6%3C619::aid-sim188%3E3.0.co;2-a" class="external-link">https://doi.org/10.1002/(sici)1097-0258(19960330)15:6%3C619::aid-sim188%3E3.0.co;2-a</a></p>
<p>Huizenga, H. M., Visser, I., &amp; Dolan, C. V. (2011). Testing overall and moderator effects in random effects meta-regression. <em>British Journal of Mathematical and Statistical Psychology</em>, <b>64</b>(1), 1--19. <a href="https://doi.org/10.1348/000711010X522687" class="external-link">https://doi.org/10.1348/000711010X522687</a></p>
<p>López-López, J. A., Marín-Martínez, F., Sánchez-Meca, J., Van den Noortgate, W., &amp; Viechtbauer, W. (2014). Estimation of the predictive power of the model in mixed-effects meta-regression: A simulation study. <em>British Journal of Mathematical and Statistical Psychology</em>, <b>67</b>(1), 30--48. <a href="https://doi.org/10.1111/bmsp.12002" class="external-link">https://doi.org/10.1111/bmsp.12002</a></p>
<p>Raudenbush, S. W. (2009). Analyzing effect sizes: Random effects models. In H. Cooper, L. V. Hedges, &amp; J. C. Valentine (Eds.), <em>The handbook of research synthesis and meta-analysis</em> (2nd ed., pp. 295--315). New York: Russell Sage Foundation.</p>
<p>Viechtbauer, W. (2007). Hypothesis tests for population heterogeneity in meta-analysis. <em>British Journal of Mathematical and Statistical Psychology</em>, <b>60</b>(1), 29--60. <a href="https://doi.org/10.1348/000711005X64042" class="external-link">https://doi.org/10.1348/000711005X64042</a></p>
<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1--48. <a href="https://doi.org/10.18637/jss.v036.i03" class="external-link">https://doi.org/10.18637/jss.v036.i03</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="rma.uni.html">rma.uni</a></code>, <code><a href="rma.mv.html">rma.mv</a></code>, <code><a href="print.anova.rma.html">print.anova.rma</a></code></p></div>
    </div>
    </div>

    <div id="examples">
    <h2>Examples</h2>
    <div class="ref-examples sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co">### calculate log risk ratios and corresponding sampling variances</span></span>
<span class="r-in"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="escalc.html">escalc</a></span><span class="op">(</span>measure<span class="op">=</span><span class="st">"RR"</span>, ai<span class="op">=</span><span class="va">tpos</span>, bi<span class="op">=</span><span class="va">tneg</span>, ci<span class="op">=</span><span class="va">cpos</span>, di<span class="op">=</span><span class="va">cneg</span>, data<span class="op">=</span><span class="fu"><a href="https://wviechtb.github.io/metadat/reference/dat.bcg.html" class="external-link">dat.bcg</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### fit random-effects model</span></span>
<span class="r-in"><span class="va">res1</span> <span class="op">&lt;-</span> <span class="fu"><a href="rma.uni.html">rma</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, data<span class="op">=</span><span class="va">dat</span>, method<span class="op">=</span><span class="st">"ML"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### fit mixed-effects model with two moderators (absolute latitude and publication year)</span></span>
<span class="r-in"><span class="va">res2</span> <span class="op">&lt;-</span> <span class="fu"><a href="rma.uni.html">rma</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, mods <span class="op">=</span> <span class="op">~</span> <span class="va">ablat</span> <span class="op">+</span> <span class="va">year</span>, data<span class="op">=</span><span class="va">dat</span>, method<span class="op">=</span><span class="st">"ML"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### Wald-type test of the two moderators</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Test of Moderators (coefficients 2:3):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> QM(df = 2) = 33.9192, p-val &lt; .0001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### alternative way of specifying the same test</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res2</span>, X<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hypotheses:             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: ablat = 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  year = 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    estimate     se    zval   pval </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  -0.0308 0.0063 -4.9057 &lt;.0001 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  -0.0032 0.0092 -0.3471 0.7285 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Omnibus Test of Hypotheses:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> QM(df = 2) = 33.9192, p-val &lt; .0001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### corresponding likelihood ratio test</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res1</span>, <span class="va">res2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         df     AIC     BIC    AICc   logLik     LRT   pval       QE  tau^2      R^2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Full     4 23.2922 25.5520 28.2922  -7.6461                 28.3251 0.0269          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reduced  2 29.3302 30.4601 30.5302 -12.6651 10.0379 0.0066 152.2330 0.2800 90.3948% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### test of a linear combination</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res2</span>, X<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">35</span>,<span class="fl">1970</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hypothesis:                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: intrcpt + 35*ablat + 1970*year = 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    estimate     se    zval   pval </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  -0.7533 0.0837 -9.0039 &lt;.0001 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Test of Hypothesis:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> QM(df = 1) = 81.0700, p-val &lt; .0001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### use predict() to obtain the same linear combination (with its CI)</span></span>
<span class="r-in"><span class="fu"><a href="predict.rma.html">predict</a></span><span class="op">(</span><span class="va">res2</span>, newmods<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">35</span>,<span class="fl">1970</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     pred     se   ci.lb   ci.ub   pi.lb   pi.ub </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  -0.7533 0.0837 -0.9173 -0.5893 -1.1142 -0.3925 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### mixed-effects model with three moderators</span></span>
<span class="r-in"><span class="va">res3</span> <span class="op">&lt;-</span> <span class="fu"><a href="rma.uni.html">rma</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, mods <span class="op">=</span> <span class="op">~</span> <span class="va">ablat</span> <span class="op">+</span> <span class="va">year</span> <span class="op">+</span> <span class="va">alloc</span>, data<span class="op">=</span><span class="va">dat</span>, method<span class="op">=</span><span class="st">"ML"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">res3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mixed-Effects Model (k = 13; tau^2 estimator: ML)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau^2 (estimated amount of residual heterogeneity):     0.0329 (SE = 0.0272)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau (square root of estimated tau^2 value):             0.1814</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> I^2 (residual heterogeneity / unaccounted variability): 33.24%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> H^2 (unaccounted variability / sampling variability):   1.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> R^2 (amount of heterogeneity accounted for):            88.24%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Test for Residual Heterogeneity:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> QE(df = 8) = 26.2030, p-val = 0.0010</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Test of Moderators (coefficients 2:5):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> QM(df = 4) = 31.2609, p-val &lt; .0001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model Results:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  estimate       se     zval    pval     ci.lb    ci.ub </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> intrcpt          -10.0824  23.9973  -0.4201  0.6744  -57.1162  36.9514      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ablat             -0.0277   0.0071  -3.9298  &lt;.0001   -0.0416  -0.0139  *** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> year               0.0053   0.0122   0.4371  0.6620   -0.0185   0.0292      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> allocrandom       -0.2826   0.2540  -1.1127  0.2658   -0.7804   0.2152      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> allocsystematic   -0.1104   0.2551  -0.4330  0.6650   -0.6104   0.3895      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### test the 'alloc' factor</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res3</span>, btt<span class="op">=</span><span class="fl">4</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Test of Moderators (coefficients 4:5):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> QM(df = 2) = 1.4674, p-val = 0.4801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### instead of specifying the coefficient numbers, grep for "alloc"</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res3</span>, btt<span class="op">=</span><span class="st">"alloc"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Test of Moderators (coefficients 4:5):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> QM(df = 2) = 1.4674, p-val = 0.4801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">############################################################################</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### an example of doing LRTs of variance components in more complex models</span></span>
<span class="r-in"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wviechtb.github.io/metadat/reference/dat.konstantopoulos2011.html" class="external-link">dat.konstantopoulos2011</a></span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="rma.mv.html">rma.mv</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, random <span class="op">=</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">district</span><span class="op">/</span><span class="va">school</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### test the district-level variance component</span></span>
<span class="r-in"><span class="va">res0</span> <span class="op">&lt;-</span> <span class="fu"><a href="rma.mv.html">rma.mv</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, random <span class="op">=</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">district</span><span class="op">/</span><span class="va">school</span>, data<span class="op">=</span><span class="va">dat</span>, sigma2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res</span>, <span class="va">res0</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         df     AIC     BIC    AICc   logLik     LRT   pval       QE tau^2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Full     3 21.9174 27.9394 22.3880  -7.9587                578.8640    NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reduced  2 37.6910 41.7057 37.9218 -16.8455 17.7736 &lt;.0001 578.8640    NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### test the school-level variance component</span></span>
<span class="r-in"><span class="va">res0</span> <span class="op">&lt;-</span> <span class="fu"><a href="rma.mv.html">rma.mv</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, random <span class="op">=</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">|</span> <span class="va">district</span><span class="op">/</span><span class="va">school</span>, data<span class="op">=</span><span class="va">dat</span>, sigma2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res</span>, <span class="va">res0</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         df     AIC     BIC    AICc   logLik     LRT   pval       QE tau^2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Full     3 21.9174 27.9394 22.3880  -7.9587                578.8640    NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reduced  2 68.4330 72.4476 68.6637 -32.2165 48.5155 &lt;.0001 578.8640    NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">### test both variance components simultaneously</span></span>
<span class="r-in"><span class="va">res0</span> <span class="op">&lt;-</span> <span class="fu"><a href="rma.mv.html">rma.mv</a></span><span class="op">(</span><span class="va">yi</span>, <span class="va">vi</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">anova</span><span class="op">(</span><span class="va">res</span>, <span class="va">res0</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         df      AIC      BIC     AICc    logLik      LRT   pval       QE tau^2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Full     3  21.9174  27.9394  22.3880   -7.9587                 578.8640    NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reduced  1 439.7236 441.7310 439.7991 -218.8618 421.8062 &lt;.0001 578.8640    NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Made with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> , using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer></div>

  


  

  </body></html>

