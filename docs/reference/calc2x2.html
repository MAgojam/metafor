<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Reconstruct Cell Frequencies of \(2 \times 2\) Tables — calc2x2 • metafor</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Reconstruct Cell Frequencies of \(2 \times 2\) Tables — calc2x2"><meta property="og:description" content="Function to reconstruct the cell frequencies of \(2 \times 2\) tables based on other summary statistics. "><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wviechtb"><meta name="twitter:site" content="@wviechtb"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="../darkswitch.js"></script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.9-27</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/article/view/v036i03" class="external-link">JSS Article</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        <li>
  <a href="https://twitter.com/wviechtb" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
        
        


      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Reconstruct Cell Frequencies of <em></em>\(2 \times 2\) Tables</h1>
    
    <div class="hidden name"><code>calc2x2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to reconstruct the cell frequencies of <em></em>\(2 \times 2\) tables based on other summary statistics. <script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc2x2</span><span class="op">(</span><span class="va">ri</span>, <span class="va">ori</span>, <span class="va">ni</span>, <span class="va">n1i</span>, <span class="va">n2i</span>, <span class="va">data</span>, <span class="va">include</span>,</span>
<span>        var.names<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ai"</span>,<span class="st">"bi"</span>,<span class="st">"ci"</span>,<span class="st">"di"</span><span class="op">)</span>, append<span class="op">=</span><span class="cn">TRUE</span>, replace<span class="op">=</span><span class="st">"ifna"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>ri</dt>
<dd><p>vector with the phi coefficients corresponding to the tables.</p></dd>

   <dt>ori</dt>
<dd><p>vector with the odds ratios corresponding to the tables.</p></dd>

   <dt>ni</dt>
<dd><p>vector with the total sample sizes.</p></dd>

   <dt>n1i</dt>
<dd><p>vector with the marginal counts for the outcome of interest on the first variable.</p></dd>

   <dt>n2i</dt>
<dd><p>vector with the marginal counts for the outcome of interest on the second variable.</p></dd>

   <dt>data</dt>
<dd><p>optional data frame containing the variables given to the arguments above.</p></dd>

   <dt>include</dt>
<dd><p>optional (logical or numeric) vector to specify the subset of studies for which the cell frequencies should be reconstructed.</p></dd>

   <dt>var.names</dt>
<dd><p>character vector with four elements to specify the names of the variables for the reconstructed cell frequencies (the default is <code>c("ai","bi","ci","di")</code>).</p></dd>

   <dt>append</dt>
<dd><p>logical to specify whether the data frame provided via the <code>data</code> argument should be returned together with the reconstructed values (the default is <code>TRUE</code>).</p></dd>

   <dt>replace</dt>
<dd><p>character string to specify how values in <code>var.names</code> should be replaced (only relevant when using the <code>data</code> argument and if variables in <code>var.names</code> already exist in the data frame). See the ‘Value’ section for more details.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>For meta-analyses based on <em></em>\(2 \times 2\) table data, the problem often arises that some studies do not directly report the cell frequencies. The present function allows the reconstruction of such tables based on other summary statistics.</p>
<p>In particular, assume that the data of interest for a particular study are of the form:</p><table class="table table"><tr><td></td><td> </td><td>variable 2, outcome +</td><td> </td><td>variable 2, outcome -</td><td> </td><td>total</td></tr><tr><td>variable 1, outcome +</td><td> </td><td><code>ai</code></td><td> </td><td><code>bi</code></td><td> </td><td><code>n1i</code></td></tr><tr><td>variable 1, outcome -</td><td> </td><td><code>ci</code></td><td> </td><td><code>di</code></td><td> </td><td></td></tr><tr><td>total</td><td> </td><td><code>n2i</code></td><td> </td><td></td><td> </td><td><code>ni</code></td></tr></table><p>where <code>ai</code>, <code>bi</code>, <code>ci</code>, and <code>di</code> denote the cell frequencies (i.e., the number of individuals falling into a particular category), <code>n1i</code> (i.e., <code>ai+bi</code>) and <code>n2i</code> (i.e., <code>ai+ci</code>) are the marginal totals for the outcome of interest on the first and second variable, respectively, and <code>ni</code> is the total sample size (i.e., <code>ai+bi+ci+di</code>) of the study.</p>
<p>For example, if variable 1 denotes two different groups (e.g., treated versus control) and variable 2 indicates whether a particular outcome of interest has occurred or not (e.g., death, complications, failure to improve under the treatment), then <code>n1i</code> denotes the number of individuals in the treatment group, but <code>n2i</code> is <em>not</em> the number of individuals in the control group, but the total number of individuals who experienced the outcome of interest on variable 2. Note that the meaning of <code>n2i</code> is therefore different here compared to the <code><a href="escalc.html">escalc</a></code> function (where <code>n2i</code> denotes <code>ci+di</code>).</p>
<p>If a study does not report the cell frequencies, but it reports the odds ratio for the table, the total sample size, and the two marginal counts, then the cell frequencies can be reconstructed (Bonett, 2007). If instead of the odds ratio, the phi coefficient is available (in addition to the other information), then again the cell frequencies can be reconstructed (own derivation). The required information for the reconstruction needs to be specified via the <code>ri</code>, <code>ori</code>, <code>ni</code>, <code>n1i</code>, and <code>n2i</code> arguments.</p>
<p>Typically, the odds ratio or phi coefficient that can be extracted from a study will be rounded to a certain degree. The calculations underlying the function are exact only for unrounded values. Discrepancies introduced due to rounding should be relatively minor though.</p>
<p>If a marginal total is unknown, then external information needs to be used to ‘guestimate’ the number of individuals that experienced the outcome of interest on this variable. Depending on the accuracy of such an estimate, the reconstructed cell frequencies will be more or less accurate and need to be treated with due caution. If only one of the two marginal counts is unknown but a 95% CI for the odds ratio is also available, then the <a href="https://cran.r-project.org/package=estimraw" class="external-link">estimraw</a> package can also be used to reconstruct the corresponding cell frequencies (Di Pietrantonj, 2006, but see Veroniki et al., 2013, for some cautions).</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>If the <code>data</code> argument was not specified or <code>append=FALSE</code>, a data frame with four variables called <code>var.names</code> with the reconstructed cell frequencies.</p>


<p>If <code>data</code> was specified and <code>append=TRUE</code>, then the original data frame is returned. If <code>var.names[j]</code> (for <em></em>\(\textrm{j} \in \{1, \ldots, 4\}\)) is a variable in <code>data</code> and <code>replace="ifna"</code>, then missing values in this variable are replaced with the estimated frequencies (where possible) and otherwise a new variable called <code>var.names[j]</code> is added to the data frame.</p>


<p>If <code>replace="all"</code>, then all values in <code>var.names[j]</code> where a reconstructed cell frequency can be computed are replaced, even for cases where the value in <code>var.names[j]</code> is not missing.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Wolfgang Viechtbauer <a href="mailto:wvb@metafor-project.org">wvb@metafor-project.org</a> <a href="https://www.metafor-project.org" class="external-link">https://www.metafor-project.org</a></p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Bonett, D. G. (2007). Transforming odds ratios into correlations for meta-analytic research. <em>American Psychologist</em>, <b>62</b>(3), 254–255. <a href="https://doi.org/10.1037/0003-066x.62.3.254" class="external-link">https://doi.org/10.1037/0003-066x.62.3.254</a></p>
<p>Di Pietrantonj, C. (2006). Four-fold table cell frequencies imputation in meta analysis. <em>Statistics in Medicine</em>, <b>25</b>(13), 2299–2322. <a href="https://doi.org/10.1002/sim.2287" class="external-link">https://doi.org/10.1002/sim.2287</a></p>
<p>Veroniki, A. A., Pavlides, M., Patsopoulos, N. A., &amp; Salanti, G. (2013). Reconstructing 2 x 2 contingency tables from odds ratios using the Di Pietrantonj method: Difficulties, constraints and impact in meta-analysis results. <em>Research Synthesis Methods</em>, <b>4</b>(1), 78–94. <a href="https://doi.org/10.1002/jrsm.1061" class="external-link">https://doi.org/10.1002/jrsm.1061</a></p>
<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1–48. <a href="https://doi.org/10.18637/jss.v036.i03" class="external-link">https://doi.org/10.18637/jss.v036.i03</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="escalc.html">escalc</a></code> for a function to compute various effect size measures based on <em></em>\(2 \times 2\) table data.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">### demonstration that the reconstruction of the 2x2 table works</span></span></span>
<span class="r-in"><span><span class="co">### (note: the values in rows 2 and 3 correspond to those in row 1)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ai<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">49</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>, bi<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">23</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>, ci<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>, di<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  phi<span class="op">=</span><span class="cn">NA</span>, oddsratio<span class="op">=</span><span class="cn">NA</span>, ni<span class="op">=</span><span class="cn">NA</span>, n1i<span class="op">=</span><span class="cn">NA</span>, n2i<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">phi</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="escalc.html">escalc</a></span><span class="op">(</span>measure<span class="op">=</span><span class="st">"PHI"</span>, ai<span class="op">=</span><span class="va">ai</span>, bi<span class="op">=</span><span class="va">bi</span>, ci<span class="op">=</span><span class="va">ci</span>, di<span class="op">=</span><span class="va">di</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span><span class="op">$</span><span class="va">yi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">oddsratio</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="escalc.html">escalc</a></span><span class="op">(</span>measure<span class="op">=</span><span class="st">"OR"</span>, ai<span class="op">=</span><span class="va">ai</span>, bi<span class="op">=</span><span class="va">bi</span>, ci<span class="op">=</span><span class="va">ci</span>, di<span class="op">=</span><span class="va">di</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span><span class="op">$</span><span class="va">yi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">ni</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">ai</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">bi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">ci</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">di</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">n1i</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">ai</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">bi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">n2i</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">ai</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">ci</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ai bi ci di  phi oddsratio  ni n1i n2i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 49 23 12 19   NA        NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 NA NA NA NA 0.27        NA 103  72  61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 NA NA NA NA   NA      3.37 103  72  61</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### reconstruct cell frequencies for rows 2 and 3</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">calc2x2</span><span class="op">(</span>ri<span class="op">=</span><span class="va">phi</span>, ori<span class="op">=</span><span class="va">oddsratio</span>, ni<span class="op">=</span><span class="va">ni</span>, n1i<span class="op">=</span><span class="va">n1i</span>, n2i<span class="op">=</span><span class="va">n2i</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ai bi ci di  phi oddsratio  ni n1i n2i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 49 23 12 19   NA        NA  NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 49 23 12 19 0.27        NA 103  72  61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 49 23 12 19   NA      3.37 103  72  61</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### same example but with cell frequencies that are 10 times as large</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ai<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">490</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>, bi<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">230</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>, ci<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">120</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>, di<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">190</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  phi<span class="op">=</span><span class="cn">NA</span>, oddsratio<span class="op">=</span><span class="cn">NA</span>, ni<span class="op">=</span><span class="cn">NA</span>, n1i<span class="op">=</span><span class="cn">NA</span>, n2i<span class="op">=</span><span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">phi</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="escalc.html">escalc</a></span><span class="op">(</span>measure<span class="op">=</span><span class="st">"PHI"</span>, ai<span class="op">=</span><span class="va">ai</span>, bi<span class="op">=</span><span class="va">bi</span>, ci<span class="op">=</span><span class="va">ci</span>, di<span class="op">=</span><span class="va">di</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span><span class="op">$</span><span class="va">yi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">oddsratio</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="escalc.html">escalc</a></span><span class="op">(</span>measure<span class="op">=</span><span class="st">"OR"</span>, ai<span class="op">=</span><span class="va">ai</span>, bi<span class="op">=</span><span class="va">bi</span>, ci<span class="op">=</span><span class="va">ci</span>, di<span class="op">=</span><span class="va">di</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span><span class="op">$</span><span class="va">yi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">ni</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">ai</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">bi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">ci</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">di</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">n1i</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">ai</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">bi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span><span class="op">$</span><span class="va">n2i</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">ai</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">ci</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">calc2x2</span><span class="op">(</span>ri<span class="op">=</span><span class="va">phi</span>, ori<span class="op">=</span><span class="va">oddsratio</span>, ni<span class="op">=</span><span class="va">ni</span>, n1i<span class="op">=</span><span class="va">n1i</span>, n2i<span class="op">=</span><span class="va">n2i</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="co"># slight inaccuracy in row 2 due to rounding</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ai  bi  ci  di  phi oddsratio   ni n1i n2i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 490 230 120 190   NA        NA   NA  NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 489 231 121 189 0.27        NA 1030 720 610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 490 230 120 190   NA      3.37 1030 720 610</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    appId: 'SFWCWKDGL8',
    
    apiKey: 'b56f56470243cf9799f796a3d6ecaedd',
    indexName: 'metafor',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

